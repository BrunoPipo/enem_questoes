<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Questões ENEM Matemática</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f6f8;
  margin: 0;
}

h1 {
  text-align: center;
}

#topo {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
}

#contador {
  background: #fff;
  padding: 8px 14px;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  font-weight: bold;
}

#pesquisa, #colunas {
  width: 240px;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
  display: block;
  margin: 10px auto;
}

#container {
  --cols: 3;
  display: grid;
  grid-template-columns: repeat(var(--cols), 1fr);
  gap: 20px;
  padding: 20px;
  max-width: 1400px;
  margin: 0 auto;
}

.questao {
  background: #fff;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.questao img {
  max-width: 100%;
  margin: 10px 0;
  border-radius: 8px;
}

.alternativas {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 8px;
  margin-top: 10px;
}

.alternativas button {
  height: 42px;
  font-weight: bold;
  border-radius: 6px;
  border: 1px solid #ccc;
  cursor: pointer;
  background: #e0e0e0;
}

.alternativas button.correta {
  background: #2e7d32;
  color: #fff;
}

.alternativas button.errada {
  background: #c62828;
  color: #fff;
}

.alternativas button:disabled {
  cursor: default;
}

</style>
</head>

<body>

<div id="topo">
  <div></div>
  <div id="contador">✔ Acertos: <span id="acertos">0</span> | ✖ Erros: <span id="erros">0</span></div>
</div>

<h1>Questões de Matemática – ENEM</h1>

<input type="text" id="pesquisa" placeholder="Pesquisar: ex 2018 45">

<select id="colunas">
  <option value="1">1 coluna</option>
  <option value="2">2 colunas</option>
  <option value="3" selected>3 colunas</option>
  <option value="4">4 colunas</option>
</select>

<div id="container"></div>

<script>
let questoes = [];
let termoPesquisa = "";
let acertos = 0;
let erros = 0;

document.getElementById("colunas").addEventListener("change", e => {
  document.getElementById("container")
    .style.setProperty("--cols", e.target.value);
});

fetch("questoes.csv")
  .then(r => r.text())
  .then(csv => {
    const linhas = csv.trim().split("\n").slice(1);

    linhas.forEach(linha => {
      const [ano, num, , gabarito] = linha.split(";");
      questoes.push({ ano, num, gabarito: gabarito.trim() });
    });

    renderizar(questoes);
  });

function renderizar(lista) {
  const container = document.getElementById("container");
  container.innerHTML = "";

  lista.forEach(q => {
    const div = document.createElement("div");
    div.className = "questao";

    div.innerHTML = `
      <h3>${q.ano} – Questão ${q.num}</h3>

      <img src="imagens/${q.ano}_q${q.num}.png"
           onerror="this.onerror=null;this.src='imagens/${q.ano}_q${q.num}.PNG';">

      <div class="alternativas" id="alt_${q.ano}_${q.num}">
        ${["A","B","C","D","E"].map(l =>
          `<button onclick="responder('${q.ano}_${q.num}','${l}','${q.gabarito}')">${l}</button>`
        ).join("")}
      </div>
    `;
    container.appendChild(div);
  });
}

function responder(id, escolha, correta) {
  const botoes = document.querySelectorAll(`#alt_${id} button`);
  botoes.forEach(b => {
    b.disabled = true;
    if (b.textContent === correta) b.classList.add("correta");
  });

  const clicado = [...botoes].find(b => b.textContent === escolha);
  if (escolha === correta) {
    acertos++;
  } else {
    erros++;
    clicado.classList.add("errada");
  }

  document.getElementById("acertos").textContent = acertos;
  document.getElementById("erros").textContent = erros;
}
</script>

</body>
</html>
